<!DOCTYPE html>
<html lang="en">
<head>
    <title>Search/View</title>
	<script>
        // Function to perform AJAX search
        async function searchGames(event) {
            event.preventDefault(); // Prevent form from reloading the page

            const searchQuery = document.getElementById('search-input').value;
            const resultsDiv = document.getElementById('results');

            // Clear previous results
            resultsDiv.innerHTML = '';

            // Perform the fetch request
            const response = await fetch('/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ title: searchQuery }),
            });

            // Parse the JSON response
            const data = await response.json();

            // Display the results
            if (data.games.length > 0) {
                data.games.forEach(game => {
                    const gameElement = document.createElement('div');
                    gameElement.innerHTML = `
                        <p>
                            <a href="/details/${game.appid}">${game.title} (ID: ${game.appid})</a>
                        </p>
                    `;
                    resultsDiv.appendChild(gameElement);
                });
            } else {
                resultsDiv.innerHTML = '<p>No games found.</p>';
            }
        }
    </script>
</head>
<body>
<input type="button" name="add" value="add games" href="/add">
<input type="text" name="search" id="search" value="Search by name"></br>
<input type="button" name="send" value="search">

</div>
</body>
</html>
